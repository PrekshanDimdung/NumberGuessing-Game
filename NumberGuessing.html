<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Number Guessing Game</title>
    <!-- Link to external CSS -->
    <link rel="stylesheet" href="styles.css">
    <!-- Include jQuery (required for the script) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Section 3: Game Demo -->
        <h2 id="game-demo">Live Game Demo</h2>
        <div class="game-container">
            <h3>ðŸŽ¯ Try the Game!</h3>
            <div id="gameArea">
                <h2>Guess the Number (1-100)</h2>
                <div id="stats">
                    <div class="stat-box">
                        <div class="stat-label">Attempts</div>
                        <div class="stat-value" id="attempts">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Best Score</div>
                        <div class="stat-value" id="bestScore">-</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Games Played</div>
                        <div class="stat-value" id="gamesPlayed">0</div>
                    </div>
                </div>
                
                <div id="message" class="info">Make your first guess!</div>
                
                <div>
                    <input type="number" id="guessInput" min="1" max="100" placeholder="Enter 1-100">
                </div>
                
                <div>
                    <button id="submitGuess">Submit Guess</button>
                    <button id="resetGame">New Game</button>
                    <button id="clearStats">Clear Stats</button>
                </div>
                
                <div id="guessHistory">
                    <strong>Your Guesses:</strong> <span id="historyList">None yet</span>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // ==================== GLOBAL VARIABLES ====================
        let secretNumber;
        let attempts;
        let guessHistory;
        let bestScore;
        let gamesPlayed;

        // ==================== INITIALIZATION ====================
        $(document).ready(function() {
            loadGameData();
            initializeGame();
            setupEventListeners();
        });

        // ==================== GAME FUNCTIONS ====================
        function initializeGame() {
            secretNumber = Math.floor(Math.random() * 100) + 1;
            attempts = 0;
            guessHistory = [];
            updateDisplay();
            $('#guessInput').val('').focus();
            $('#guessInput').prop('disabled', false);
            $('#submitGuess').prop('disabled', false);
            showMessage('Make your first guess!', 'info');
        }

        function checkGuess() {
            const guess = parseInt($('#guessInput').val());
            
            if (isNaN(guess)) {
                showMessage('Please enter a valid number!', 'error');
                return;
            }
            
            if (guess < 1 || guess > 100) {
                showMessage('Number must be between 1 and 100!', 'warning');
                return;
            }
            
            if (guessHistory.includes(guess)) {
                showMessage('You already guessed ' + guess + '!', 'warning');
                return;
            }
            
            attempts++;
            guessHistory.push(guess);
            
            if (guess === secretNumber) {
                handleWin();
            } else if (guess < secretNumber) {
                showMessage('ðŸ“‰ Too low! Try higher.', 'warning');
            } else {
                showMessage('ðŸ“ˆ Too high! Try lower.', 'warning');
            }
            
            updateDisplay();
            $('#guessInput').val('').focus();
        }

        function handleWin() {
            showMessage('ðŸŽ‰ You won in ' + attempts + ' attempts!', 'success');
            gamesPlayed++;
            
            if (bestScore === null || attempts < bestScore) {
                bestScore = attempts;
            }
            
            saveGameData();
            updateDisplay();
            $('#guessInput').prop('disabled', true);
            $('#submitGuess').prop('disabled', true);
        }

        // ==================== SESSION STORAGE ====================
        function saveGameData() {
            sessionStorage.setItem('bestScore', bestScore);
            sessionStorage.setItem('gamesPlayed', gamesPlayed);
        }

        function loadGameData() {
            bestScore = sessionStorage.getItem('bestScore');
            gamesPlayed = sessionStorage.getItem('gamesPlayed');
            bestScore = bestScore ? parseInt(bestScore) : null;
            gamesPlayed = gamesPlayed ? parseInt(gamesPlayed) : 0;
        }

        function clearStatistics() {
            if (confirm('Clear all statistics?')) {
                sessionStorage.clear();
                bestScore = null;
                gamesPlayed = 0;
                updateDisplay();
                showMessage('Statistics cleared!', 'info');
            }
        }

        // ==================== DISPLAY FUNCTIONS ====================
        function updateDisplay() {
            $('#attempts').text(attempts);
            $('#bestScore').text(bestScore !== null ? bestScore : '-');
            $('#gamesPlayed').text(gamesPlayed);
            displayGuessHistory();
        }

        function displayGuessHistory() {
            if (guessHistory.length === 0) {
                $('#historyList').text('None yet');
                return;
            }
            
            let historyHTML = '';
            for (let i = 0; i < guessHistory.length; i++) {
                historyHTML += '<span class="guess-item">' + guessHistory[i] + '</span>';
            }
            $('#historyList').html(historyHTML);
        }

        function showMessage(text, type) {
            const $message = $('#message');
            $message.removeClass('success error info warning');
            $message.addClass(type).text(text);
        }

        // ==================== EVENT HANDLERS ====================
        function setupEventListeners() {
            $('#submitGuess').click(function() {
                checkGuess();
            });
            
            $('#guessInput').keypress(function(event) {
                if (event.which === 13) {
                    checkGuess();
                }
            });
            
            $('#resetGame').click(function() {
                initializeGame();
            });
            
            $('#clearStats').click(function() {
                clearStatistics();
            });
        }
    </script>
</body>
</html>
